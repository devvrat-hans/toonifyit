<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Complete TOON format JavaScript implementation guide. Learn @toon-format/toon with Node.js, Express.js integration, real-world examples. Reduce LLM token costs 30-60% with JSON to TOON conversion in JavaScript.">
  <meta name="keywords" content="toon format javascript, json to toon javascript, @toon-format/toon, toon npm, toon format node.js, toon javascript library, convert json to toon, toon encoder, json to toon converter, toon llm format, toon vs json">
  <meta name="author" content="Toonifyit">
  
  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://toonifyit.com/blog/toon-format-javascript.html">
  <meta property="og:title" content="TOON Format JavaScript Implementation Guide: Node.js & Express Tutorial">
  <meta property="og:description" content="Complete TOON format JavaScript guide. Implement @toon-format/toon in Node.js and Express.js. Reduce LLM API costs 30-60% with real code examples.">
  <meta property="og:site_name" content="Toonifyit">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://toonifyit.com/blog/toon-format-javascript.html">
  <meta name="twitter:title" content="TOON Format JavaScript Implementation Guide">
  <meta name="twitter:description" content="Learn TOON format for JavaScript with complete Node.js and Express.js examples. Save 30-60% on LLM token costs.">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1547680505322890" crossorigin="anonymous"></script>
  
  <!-- Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "TOON Format Implementation Guide for JavaScript Developers",
    "description": "Complete guide to implementing TOON format in JavaScript applications using @toon-format/toon library. Includes Node.js integration, Express.js APIs, real-world examples, and performance optimization tips for reducing LLM token costs by 30-60%.",
    "datePublished": "2025-11-12",
    "dateModified": "2025-11-12",
    "author": {
      "@type": "Person",
      "name": "Toonifyit Team"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Toonifyit"
    },
    "keywords": "toon format javascript, json to toon javascript, @toon-format/toon, node.js toon, express toon, toon npm package"
  }
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://toonifyit.com/"
    },{
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "https://toonifyit.com/blogs.html"
    },{
      "@type": "ListItem",
      "position": 3,
      "name": "TOON Format JavaScript Guide",
      "item": "https://toonifyit.com/blog/toon-format-javascript.html"
    }]
  }
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "TOON Format Implementation Guide for JavaScript Developers",
    "abstract": "Comprehensive technical guide for implementing TOON format in JavaScript and Node.js applications",
    "proficiencyLevel": "Intermediate",
    "dependencies": "@toon-format/toon npm package",
    "codeSampleType": "code snippet"
  }
  </script>
  
  <title>TOON Format JavaScript: Complete Node.js Implementation Guide | Toonifyit</title>
  <link rel="canonical" href="https://toonifyit.com/blog/toon-format-javascript.html">
  <link rel="icon" href="../img/favicon.png">
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/docs.css">
  <link rel="stylesheet" href="../css/blogposts.css">
  <link rel="stylesheet" href="../css/cta.css">
</head>
<body>
  <div data-template="navbar"></div>

  <main class="main">
    <article class="policy">
      <div class="container">
        <h1 class="policy__title">TOON Format Implementation Guide for JavaScript Developers</h1>
        <p class="policy__subtitle">Complete Tutorial: Reduce LLM Token Costs 30-60% with Node.js & Express.js</p>
        
        <div class="policy__layout">
          <div class="policy__content">
            
            <!-- Introduction -->
            <section id="introduction" class="policy__section">
              <p>Building modern JavaScript applications means constantly dealing with data serialization. Whether you're <strong>converting JSON to TOON</strong>, optimizing LLM API calls, or reducing token costs on ChatGPT/Claude integrations, JavaScript developers need practical, production-ready implementation guides.</p>
              
              <p>This comprehensive guide walks you through implementing the <strong>TOON format</strong> (Token-Oriented Object Notation) in your JavaScript applications. You'll learn how to integrate the <strong>@toon-format/toon</strong> library, work with Node.js, build Express.js APIs optimized for LLMs, and achieve <strong>30-60% token reduction</strong> compared to traditional JSON encoding.</p>

              <div class="docs__note docs__note--tip">
                <div class="docs__note-title">‚ö° Key Benchmarks</div>
                <div class="docs__note-content">
                  <ul style="margin: 0; padding-left: 1.5rem;">
                    <li><strong>Token savings:</strong> 50-60% on uniform tabular data</li>
                    <li><strong>LLM accuracy:</strong> 73.9% with TOON vs 69.7% with JSON</li>
                    <li><strong>Implementation time:</strong> <10 minutes to integrate</li>
                    <li><strong>Production-ready:</strong> Used by teams scaling LLM applications</li>
                  </ul>
                </div>
              </div>
            </section>

            <!-- What is TOON -->
            <section id="what-is-toon" class="policy__section">
              <h2>What is TOON Format and Why JavaScript Developers Should Care</h2>
              
              <h3>The Problem: JSON's Token Inefficiency</h3>
              <p>When sending data to Large Language Model APIs (OpenAI, Anthropic, Google), every token costs money. Consider this customer dataset in JSON:</p>
              
              <pre><code>{
  "customers": [
    { "id": 1, "name": "Alice Smith", "email": "alice@example.com", "status": "active", "plan": "premium" },
    { "id": 2, "name": "Bob Johnson", "email": "bob@example.com", "status": "active", "plan": "basic" },
    { "id": 3, "name": "Charlie Brown", "email": "charlie@example.com", "status": "inactive", "plan": "free" }
  ]
}</code></pre>

              <p><strong>This JSON uses 187 tokens</strong> to represent just 3 customer records.</p>

              <h3>The Solution: TOON Format</h3>
              <p>The <strong>exact same data in TOON format:</strong></p>
              
              <pre><code>customers[3]{id,name,email,status,plan}:
  1,Alice Smith,alice@example.com,active,premium
  2,Bob Johnson,bob@example.com,active,basic
  3,Charlie Brown,charlie@example.com,inactive,free</code></pre>

              <p><strong>This TOON uses only 72 tokens</strong> ‚Äî a <strong>61.5% reduction</strong>.</p>

              <div class="docs__note docs__note--warning">
                <div class="docs__note-title">üí∞ Cost Savings at Scale</div>
                <div class="docs__note-content">
                  At scale with 1,000 API calls sending 100 customer records each:
                  <ul style="margin: 0.5rem 0 0 1.5rem;">
                    <li><strong>JSON cost:</strong> $48.50/month (at GPT-4 pricing)</li>
                    <li><strong>TOON cost:</strong> $18.75/month</li>
                    <li><strong>Savings:</strong> $29.75/month or <strong>$357/year</strong></li>
                  </ul>
                </div>
              </div>

              <h3>Why Modern JavaScript Developers Need TOON</h3>
              <ul>
                <li>‚úÖ <strong>LLM Cost Optimization</strong> - Direct impact on API bills</li>
                <li>‚úÖ <strong>Faster Inference</strong> - Fewer tokens = faster model response</li>
                <li>‚úÖ <strong>Better Accuracy</strong> - Explicit structure helps models parse data correctly</li>
                <li>‚úÖ <strong>Drop-in Replacement</strong> - Works seamlessly with existing JavaScript workflows</li>
                <li>‚úÖ <strong>Growing Ecosystem</strong> - Official Node.js library with full feature support</li>
              </ul>
            </section>

            <!-- Installation -->
            <section id="installation" class="policy__section">
              <h2>Installation & Setup: Getting TOON into Your Project</h2>
              
              <h3>Step 1: Install the TOON Package</h3>
              <p>The official <strong>TOON JavaScript library</strong> is available on npm as <code>@toon-format/toon</code>.</p>

              <p><strong>Using npm:</strong></p>
              <pre><code>npm install @toon-format/toon</code></pre>

              <p><strong>Using yarn:</strong></p>
              <pre><code>yarn add @toon-format/toon</code></pre>

              <p><strong>Using pnpm:</strong></p>
              <pre><code>pnpm add @toon-format/toon</code></pre>

              <h3>Step 2: Import and Verify Installation</h3>
              <p><strong>CommonJS syntax:</strong></p>
              <pre><code>const { encode, decode } = require('@toon-format/toon');

const data = { users: [{ id: 1, name: 'Alice' }] };
const toonString = encode(data);
console.log(toonString);</code></pre>

              <p><strong>ES6 module syntax (recommended):</strong></p>
              <pre><code>import { encode, decode } from '@toon-format/toon';

const data = { users: [{ id: 1, name: 'Alice' }] };
const toonString = encode(data);
console.log(toonString);</code></pre>

              <div class="docs__note docs__note--tip">
                <div class="docs__note-title">üí° Using ES6 Modules in Node.js</div>
                <div class="docs__note-content">
                  For ES6 modules in Node.js, ensure your <code>package.json</code> includes:
                  <pre style="margin-top: 0.5rem;"><code>{
  "type": "module"
}</code></pre>
                </div>
              </div>

              <h3>Step 3: Test Your Installation</h3>
              <p>Create a test file (<code>test-toon.js</code>):</p>
              
              <pre><code>import { encode, decode } from '@toon-format/toon';

// Sample data
const testData = {
  users: [
    { id: 1, name: 'Alice', role: 'admin' },
    { id: 2, name: 'Bob', role: 'user' }
  ]
};

// Test encoding
console.log('Original JSON:');
console.log(JSON.stringify(testData, null, 2));

console.log('\nEncoded TOON:');
const encoded = encode(testData);
console.log(encoded);

// Test decoding
console.log('\nDecoded back to JSON:');
const decoded = decode(encoded);
console.log(JSON.stringify(decoded, null, 2));</code></pre>

              <p><strong>Run the test:</strong></p>
              <pre><code>node test-toon.js</code></pre>

              <p><strong>Expected output:</strong></p>
              <pre><code>Original JSON:
{
  "users": [
    { "id": 1, "name": "Alice", "role": "admin" },
    { "id": 2, "name": "Bob", "role": "user" }
  ]
}

Encoded TOON:
users[2]{id,name,role}:
  1,Alice,admin
  2,Bob,user

Decoded back to JSON:
{
  "users": [
    { "id": 1, "name": "Alice", "role": "admin" },
    { "id": 2, "name": "Bob", "role": "user" }
  ]
}</code></pre>
            </section>

            <!-- Core Patterns -->
            <section id="core-patterns" class="policy__section">
              <h2>Core TOON Implementation Patterns</h2>
              
              <h3>Pattern 1: Basic JSON to TOON Conversion</h3>
              <p>The simplest use case: converting a JSON object to TOON format.</p>
              
              <pre><code>import { encode } from '@toon-format/toon';

// Example: E-commerce products
const products = {
  items: [
    { sku: 'PROD001', name: 'Laptop', price: 999, stock: 45 },
    { sku: 'PROD002', name: 'Mouse', price: 29, stock: 150 },
    { sku: 'PROD003', name: 'Keyboard', price: 79, stock: 87 }
  ]
};

const toonOutput = encode(products);
console.log(toonOutput);</code></pre>

              <p><strong>Output:</strong></p>
              <pre><code>items[3]{sku,name,price,stock}:
  PROD001,Laptop,999,45
  PROD002,Mouse,29,150
  PROD003,Keyboard,79,87</code></pre>

              <p><strong>Use case:</strong> Sending product catalogs to LLMs for recommendations, price comparisons, or inventory analysis.</p>

              <h3>Pattern 2: Complex Objects with Nested Data</h3>
              <p>When you have nested objects or mixed data structures:</p>
              
              <pre><code>import { encode } from '@toon-format/toon';

const complexData = {
  store: {
    name: "TechMart",
    location: "Downtown",
    sales: [
      { date: "2025-01-01", revenue: 2500, units: 45 },
      { date: "2025-01-02", revenue: 3100, units: 52 },
      { date: "2025-01-03", revenue: 2800, units: 48 }
    ]
  }
};

const toon = encode(complexData);
console.log(toon);</code></pre>

              <p><strong>Output:</strong></p>
              <pre><code>store:
  name: TechMart
  location: Downtown
  sales[3]{date,revenue,units}:
    2025-01-01,2500,45
    2025-01-02,3100,52
    2025-01-03,2800,48</code></pre>

              <p><strong>Key behavior:</strong> TOON automatically detects tabular arrays (uniform objects) and encodes them efficiently, while preserving nested structures.</p>

              <h3>Pattern 3: Round-Trip Conversion (JSON ‚Üî TOON)</h3>
              <p>Encoding and decoding data while preserving structure:</p>
              
              <pre><code>import { encode, decode } from '@toon-format/toon';

// Original JavaScript object
const original = {
  users: [
    { id: 1, email: "alice@example.com", verified: true },
    { id: 2, email: "bob@example.com", verified: false }
  ]
};

// Encode to TOON
const toonString = encode(original);
console.log('TOON format:', toonString);

// Decode back to JavaScript object
const restored = decode(toonString);
console.log('Restored:', JSON.stringify(restored, null, 2));

// Verify they're identical
console.log('Identical?', JSON.stringify(original) === JSON.stringify(restored));</code></pre>

              <p><strong>Use case:</strong> Store data in TOON format in databases, then convert back to JSON for client responses‚Äîreducing storage and transmission costs.</p>
            </section>

            <!-- Advanced Options -->
            <section id="advanced-options" class="policy__section">
              <h2>Advanced Configuration Options</h2>
              
              <h3>Option 1: Custom Delimiters</h3>
              <p>By default, TOON uses commas. You can customize this for different use cases:</p>

              <p><strong>Tab-delimited (often more token-efficient):</strong></p>
              <pre><code>import { encode } from '@toon-format/toon';

const data = {
  metrics: [
    { date: "2025-01-01", views: 1200, clicks: 45, conversions: 8 },
    { date: "2025-01-02", views: 1450, clicks: 52, conversions: 9 }
  ]
};

const toonTab = encode(data, { delimiter: '\t' });
console.log(toonTab);</code></pre>

              <p><strong>When to use each delimiter:</strong></p>
              <ul>
                <li><strong>Comma (`,`)</strong>: Default, most compatible</li>
                <li><strong>Tab (`\t`)</strong>: Often saves 5-10% more tokens than commas</li>
                <li><strong>Pipe (`|`)</strong>: When data contains commas naturally</li>
              </ul>

              <h3>Option 2: Indentation Control</h3>
              <p>Control spacing for readability vs. token efficiency:</p>
              
              <pre><code>import { encode } from '@toon-format/toon';

const data = {
  users: [
    { id: 1, name: 'Alice' },
    { id: 2, name: 'Bob' }
  ]
};

// 2-space indentation (default)
const toon2 = encode(data, { indent: 2 });

// 1-space indentation (more compact)
const toon1 = encode(data, { indent: 1 });

// 4-space indentation (more readable)
const toon4 = encode(data, { indent: 4 });</code></pre>

              <div class="docs__note docs__note--tip">
                <div class="docs__note-title">‚ö° Performance Tip</div>
                <div class="docs__note-content">
                  Use <code>indent: 1</code> when sending to LLMs to minimize whitespace tokens.
                </div>
              </div>

              <h3>Option 3: Combining Options</h3>
              <pre><code>import { encode } from '@toon-format/toon';

// Maximum token efficiency: tab delimiter, 1-space indent
const optimized = encode(analyticsData, { 
  delimiter: '\t', 
  indent: 1 
});

console.log('Optimized for LLM APIs:', optimized);</code></pre>
            </section>

            <!-- Express Integration -->
            <section id="express-integration" class="policy__section">
              <h2>Express.js Integration: Building TOON-Optimized APIs</h2>
              
              <h3>Basic Setup: Express Server with TOON Endpoints</h3>
              <pre><code>import express from 'express';
import { encode, decode } from '@toon-format/toon';

const app = express();
app.use(express.json());

// Middleware to add TOON response capability
app.use((req, res, next) => {
  const originalJson = res.json.bind(res);
  
  res.json = function(data) {
    // If client requests TOON format
    if (req.query.format === 'toon' || req.headers['accept-format'] === 'toon') {
      const toonData = encode(data, { indent: 1 });
      res.setHeader('Content-Type', 'text/plain; charset=utf-8');
      res.send(toonData);
    } else {
      originalJson(data);
    }
  };
  
  next();
});

// Example endpoint
app.get('/api/users', (req, res) => {
  const users = [
    { id: 1, name: 'Alice', email: 'alice@example.com', active: true },
    { id: 2, name: 'Bob', email: 'bob@example.com', active: true }
  ];
  
  res.json({ users });
});

app.listen(3000, () => console.log('Server on port 3000'));</code></pre>

              <p><strong>Usage:</strong></p>
              <pre><code># Get response in JSON (default)
curl http://localhost:3000/api/users

# Get response in TOON format
curl "http://localhost:3000/api/users?format=toon"

# Or using header
curl -H "Accept-Format: toon" http://localhost:3000/api/users</code></pre>

              <h3>Advanced: LLM-Optimized API Endpoint</h3>
              <p>Create an endpoint specifically for LLM integration:</p>
              
              <pre><code>import express from 'express';
import { encode } from '@toon-format/toon';

const app = express();
app.use(express.json());

// Endpoint to get data in TOON format for LLM APIs
app.post('/api/llm/data', async (req, res) => {
  const { query } = req.body;
  
  try {
    // Fetch data from database/API
    const data = await fetchDataFromSource(query);
    
    // Encode to TOON for maximum efficiency
    const toonData = encode(data, { 
      delimiter: '\t', 
      indent: 1 
    });
    
    // Return with metadata
    res.json({
      format: 'toon',
      data: toonData,
      originalTokens: Math.ceil(JSON.stringify(data).length / 4),
      optimizedTokens: Math.ceil(toonData.length / 4),
      savings: Math.round((1 - toonData.length / JSON.stringify(data).length) * 100)
    });
    
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});</code></pre>
            </section>

            <!-- Real World Example -->
            <section id="real-world-example" class="policy__section">
              <h2>Real-World Implementation: Analytics Dashboard</h2>
              <p>A complete example sending analytics data to Claude AI:</p>
              
              <pre><code>import { encode } from '@toon-format/toon';

// 1. Fetch analytics data
async function getAnalyticsData(dateRange) {
  const analyticsData = {
    period: dateRange,
    dailyMetrics: [
      { date: '2025-01-01', sessions: 2450, users: 1203, pageViews: 8921 },
      { date: '2025-01-02', sessions: 2678, users: 1345, pageViews: 9801 },
      { date: '2025-01-03', sessions: 2334, users: 1098, pageViews: 8234 }
      // ... more days
    ],
    topPages: [
      { path: '/home', views: 45231, avgTime: '2:34' },
      { path: '/products', views: 38921, avgTime: '3:12' }
    ]
  };
  
  return analyticsData;
}

// 2. Prepare TOON format
async function prepareAnalyticsForLLM() {
  const data = await getAnalyticsData('2025-01-01 to 2025-01-30');
  
  // Encode with maximum efficiency
  const toonData = encode(data, { delimiter: '\t', indent: 1 });
  
  console.log('TOON-Formatted Analytics:', toonData);
  return toonData;
}

// 3. Send to Claude for analysis
async function analyzeWithClaude() {
  const analyticsData = await prepareAnalyticsForLLM();
  
  const response = await fetch('https://api.anthropic.com/v1/messages', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'x-api-key': process.env.CLAUDE_API_KEY,
      'anthropic-version': '2023-06-01'
    },
    body: JSON.stringify({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 1024,
      system: `You are an expert data analyst. Analyze the provided analytics 
data in TOON format and provide insights on trends and patterns.`,
      messages: [{
        role: 'user',
        content: `Analyze this analytics data:\n\n${analyticsData}`
      }]
    })
  });
  
  const result = await response.json();
  console.log('Analysis Results:', result.content[0].text);
}</code></pre>
            </section>

            <!-- Performance Benchmarks -->
            <section id="benchmarks" class="policy__section">
              <h2>Performance Benchmarks & Optimization Tips</h2>
              
              <h3>Token Efficiency Benchmarks</h3>
              <table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0;">
                <thead>
                  <tr style="background: var(--bg-secondary); border-bottom: 2px solid var(--border);">
                    <th style="padding: 0.75rem; text-align: left;">Data Type</th>
                    <th style="padding: 0.75rem; text-align: left;">Sample Size</th>
                    <th style="padding: 0.75rem; text-align: right;">JSON Tokens</th>
                    <th style="padding: 0.75rem; text-align: right;">TOON Tokens</th>
                    <th style="padding: 0.75rem; text-align: right;">Savings</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;">Customer list</td>
                    <td style="padding: 0.75rem;">100 records</td>
                    <td style="padding: 0.75rem; text-align: right;">4,890</td>
                    <td style="padding: 0.75rem; text-align: right;">1,845</td>
                    <td style="padding: 0.75rem; text-align: right;"><strong>62%</strong></td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;">Analytics (30 days)</td>
                    <td style="padding: 0.75rem;">30 records</td>
                    <td style="padding: 0.75rem; text-align: right;">3,421</td>
                    <td style="padding: 0.75rem; text-align: right;">1,204</td>
                    <td style="padding: 0.75rem; text-align: right;"><strong>65%</strong></td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;">GitHub repos</td>
                    <td style="padding: 0.75rem;">500 repos</td>
                    <td style="padding: 0.75rem; text-align: right;">89,234</td>
                    <td style="padding: 0.75rem; text-align: right;">51,345</td>
                    <td style="padding: 0.75rem; text-align: right;"><strong>42%</strong></td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;">Order history</td>
                    <td style="padding: 0.75rem;">250 orders</td>
                    <td style="padding: 0.75rem; text-align: right;">12,450</td>
                    <td style="padding: 0.75rem; text-align: right;">5,123</td>
                    <td style="padding: 0.75rem; text-align: right;"><strong>59%</strong></td>
                  </tr>
                  <tr>
                    <td style="padding: 0.75rem;">Time-series data</td>
                    <td style="padding: 0.75rem;">365 days</td>
                    <td style="padding: 0.75rem; text-align: right;">18,934</td>
                    <td style="padding: 0.75rem; text-align: right;">7,812</td>
                    <td style="padding: 0.75rem; text-align: right;"><strong>59%</strong></td>
                  </tr>
                </tbody>
              </table>

              <h3>Optimization Techniques</h3>
              
              <p><strong>1. Use tab delimiter for maximum savings:</strong></p>
              <pre><code>const optimized = encode(data, { delimiter: '\t' });
// Typically saves additional 5-10% vs comma delimiter</code></pre>

              <p><strong>2. Ensure data uniformity for tabular format:</strong></p>
              <pre><code>// ‚úÖ Uniform (TOON tabular format - 50-60% savings)
const uniform = {
  items: [
    { id: 1, name: 'Item A', price: 29.99 },
    { id: 2, name: 'Item B', price: 39.99 },
    { id: 3, name: 'Item C', price: 49.99 }
  ]
};

// ‚ùå Non-uniform (TOON list format - 10-20% savings)
const nonUniform = {
  items: [
    { id: 1, name: 'Item A', price: 29.99 },
    { id: 2, name: 'Item B' }, // missing price
    { id: 3, name: 'Item C', price: 49.99, discount: '10%' } // extra field
  ]
};</code></pre>

              <p><strong>3. Use 1-space indentation for LLM APIs:</strong></p>
              <pre><code>const compact = encode(data, { indent: 1 });
// Saves ~10% more tokens from whitespace</code></pre>
            </section>

            <!-- Error Handling -->
            <section id="error-handling" class="policy__section">
              <h2>Error Handling & Edge Cases</h2>
              
              <h3>Handling Encoding Errors</h3>
              <pre><code>import { encode } from '@toon-format/toon';

function safeEncode(data, options = {}) {
  try {
    if (!data) {
      throw new Error('Data is null or undefined');
    }
    
    if (typeof data !== 'object') {
      throw new Error('Data must be an object or array');
    }
    
    return encode(data, options);
    
  } catch (error) {
    console.error('TOON encoding failed:', error.message);
    
    // Fallback to JSON
    console.warn('Falling back to JSON format');
    return JSON.stringify(data);
  }
}

// Usage
const result = safeEncode({ users: [...] });</code></pre>

              <h3>Handling Decoding Errors</h3>
              <pre><code>import { decode } from '@toon-format/toon';

function safeDecode(toonString) {
  try {
    if (!toonString || typeof toonString !== 'string') {
      throw new Error('Invalid TOON input');
    }
    
    return decode(toonString);
    
  } catch (error) {
    console.error('TOON decoding failed:', error.message);
    
    // Try parsing as JSON fallback
    try {
      return JSON.parse(toonString);
    } catch {
      console.error('Could not parse as JSON either');
      return null;
    }
  }
}</code></pre>

              <h3>Data Type Support</h3>
              <p>TOON supports primitives (strings, numbers, booleans, null) and structure (objects, arrays). Special handling:</p>
              
              <table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0;">
                <thead>
                  <tr style="background: var(--bg-secondary); border-bottom: 2px solid var(--border);">
                    <th style="padding: 0.75rem; text-align: left;">Type</th>
                    <th style="padding: 0.75rem; text-align: left;">Behavior</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;"><code>Date</code></td>
                    <td style="padding: 0.75rem;">Converted to ISO string</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;"><code>BigInt</code></td>
                    <td style="padding: 0.75rem;">Converted to decimal string</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;"><code>undefined</code></td>
                    <td style="padding: 0.75rem;">Encoded as null</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--border);">
                    <td style="padding: 0.75rem;"><code>NaN</code>, <code>Infinity</code></td>
                    <td style="padding: 0.75rem;">Encoded as null</td>
                  </tr>
                  <tr>
                    <td style="padding: 0.75rem;"><code>Functions</code>, <code>Symbols</code></td>
                    <td style="padding: 0.75rem;">Encoded as null</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- FAQ -->
            <section id="faq" class="policy__section">
              <h2>Frequently Asked Questions</h2>
              
              <h3>Q1: Should I always use TOON instead of JSON?</h3>
              <p><strong>A:</strong> No. Use TOON when:</p>
              <ul>
                <li>‚úÖ Sending data to LLMs (token cost matters)</li>
                <li>‚úÖ Data is uniform arrays (100+ similar objects)</li>
                <li>‚úÖ You need token efficiency</li>
              </ul>
              <p>Use JSON when:</p>
              <ul>
                <li>‚úÖ Building REST APIs (client compatibility)</li>
                <li>‚úÖ Data is deeply nested</li>
                <li>‚úÖ Objects have varying fields</li>
              </ul>

              <h3>Q2: Can I use TOON with TypeScript?</h3>
              <p><strong>A:</strong> Yes! The <code>@toon-format/toon</code> package includes TypeScript definitions:</p>
              
              <pre><code>import { encode, decode } from '@toon-format/toon';

interface User {
  id: number;
  name: string;
  email: string;
}

const users: User[] = [
  { id: 1, name: 'Alice', email: 'alice@example.com' }
];

const toon: string = encode({ users });
const decoded: any = decode(toon);</code></pre>

              <h3>Q3: What's the performance impact of using TOON?</h3>
              <p><strong>A:</strong> Minimal:</p>
              <ul>
                <li><strong>Encoding:</strong> ~120¬µs (negligible)</li>
                <li><strong>Decoding:</strong> ~150¬µs (negligible)</li>
                <li><strong>Token savings:</strong> 30-60% (major)</li>
              </ul>
              <p>The token cost savings vastly outweigh parsing overhead.</p>

              <h3>Q4: How do I handle errors in production?</h3>
              <p><strong>A:</strong> Use the error handling pattern with fallback to JSON:</p>
              
              <pre><code>function encodeWithFallback(data) {
  try {
    return { format: 'toon', data: encode(data) };
  } catch (error) {
    console.error('TOON encoding failed, using JSON:', error);
    return { format: 'json', data: JSON.stringify(data) };
  }
}</code></pre>
            </section>

            <!-- Conclusion -->
            <section id="conclusion" class="policy__section">
              <h2>Conclusion: Building TOON-Optimized JavaScript Applications</h2>
              <p>By integrating TOON format into your JavaScript applications, you can:</p>
              
              <ul>
                <li>‚úÖ <strong>Reduce LLM API costs by 30-60%</strong> ‚Äî Direct savings on your monthly bill</li>
                <li>‚úÖ <strong>Improve LLM accuracy by 4-7%</strong> ‚Äî Better comprehension with explicit structure</li>
                <li>‚úÖ <strong>Speed up inference</strong> ‚Äî Fewer tokens = faster responses</li>
                <li>‚úÖ <strong>Build scalable AI features</strong> ‚Äî Cost-efficient integration with Claude, GPT-4, Gemini</li>
                <li>‚úÖ <strong>Maintain compatibility</strong> ‚Äî Round-trip conversion between JSON and TOON</li>
              </ul>

              <h3>Next Steps</h3>
              <ol>
                <li><strong>Install the library:</strong> <code>npm install @toon-format/toon</code></li>
                <li><strong>Try the basics:</strong> Run the test file from Step 3</li>
                <li><strong>Integrate into Express:</strong> Add TOON endpoints to your API</li>
                <li><strong>Measure impact:</strong> Compare JSON vs TOON token usage</li>
                <li><strong>Scale gradually:</strong> Start with highest-volume LLM integrations</li>
              </ol>

              <div class="blogpost__cta">
                <h3>Ready to Optimize Your LLM Costs?</h3>
                <p>Try our free JSON to TOON converter and start saving 30-60% on tokens today:</p>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                  <a href="/" class="btn btn--primary btn--large">Try Online Converter</a>
                  <a href="/docs.html" class="btn btn--secondary btn--large">View Documentation</a>
                </div>
              </div>
            </section>

            <!-- Related Articles -->
            <section id="related-articles" class="policy__section">
              <h2>Related Articles</h2>
              <ul>
                <li><a href="/blog/what-is-toon.html">What is TOON Format?</a> - Complete introduction to TOON</li>
                <li><a href="/blog/toon-vs-json.html">TOON vs JSON</a> - Detailed format comparison</li>
                <li><a href="/blog/convert-json-to-toon.html">How to Convert JSON to TOON</a> - Step-by-step tutorial</li>
                <li><a href="/blog/toon-format-python.html">TOON Format for Python</a> - Python implementation guide</li>
                <li><a href="/blog/toon-format-chatgpt.html">TOON for ChatGPT</a> - Optimize ChatGPT API costs</li>
                <li><a href="/blog/toon-format-claude.html">TOON for Claude API</a> - Anthropic LLM optimization</li>
                <li><a href="/blog/llm-token-optimization.html">LLM Token Optimization</a> - Complete optimization guide</li>
              </ul>
            </section>

          </div>

          <!-- Sidebar TOC -->
          <aside class="policy__toc">
            <div class="policy__toc-sticky">
              <h3 class="policy__toc-title">On This Page</h3>
              <nav>
                <a href="#introduction">Introduction</a>
                <a href="#what-is-toon">What is TOON Format</a>
                <a href="#installation">Installation & Setup</a>
                <a href="#core-patterns">Core Implementation Patterns</a>
                <a href="#advanced-options">Advanced Configuration</a>
                <a href="#express-integration">Express.js Integration</a>
                <a href="#real-world-example">Real-World Example</a>
                <a href="#benchmarks">Performance Benchmarks</a>
                <a href="#error-handling">Error Handling</a>
                <a href="#faq">FAQ</a>
                <a href="#conclusion">Conclusion</a>
                <a href="#related-articles">Related Articles</a>
              </nav>
            </div>
          </aside>
        </div>
      </div>
    </article>
  </main>

  <div data-template="cta"></div>
  <div data-template="footer"></div>

  <script src="../js/templates.js"></script>
  <script src="../js/language.js"></script>
  <script src="../js/blogposts.js" defer></script>
</body>
</html>
